<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Contacto | Bit By Bit</title>
  <link rel="stylesheet" href="estilo.css" />
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

  <style>
    .form-grid { display: grid; gap: 1rem; }
    .form-item { display: flex; flex-direction: column; }
    label { font-weight: bold; margin-bottom: 0.3rem; }
    input, select, textarea {
      padding: 0.5rem; border-radius: 6px; border: 1px solid #ccc;
      font-family: var(--font-base, Arial);
    }
    .error { color: red; font-size: 0.8rem; display: none; }
    .error.visible { display: block; }
    .mensaje-confirmacion {
      margin-top: 1rem; padding: 1rem;
      border-radius: 8px; background: rgba(57,255,20,0.12);
      border: 1px solid rgba(57,255,20,0.12); display: none;
    }
    #resumenDatos { margin-top: 1rem; border:1px solid #ccc; padding:1rem; border-radius:8px; display:none; background:#5c449e; }
    #resumenDatos h3 { margin-top:0; }
    /* Estilo mapa */
    #map { height: 300px; margin-top: 1rem; border-radius: 8px; }
  </style>

  <!-- reCAPTCHA v2 -->
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>
</head>
<body>

  <!-- Header -->
  <header class="site-header">
    <div class="container header-content">
      <input type="checkbox" id="menu-toggle" class="menu-toggle" />
      <label for="menu-toggle" class="menu-icon">&#9776;</label>

      <a href="index.html" class="logo">
        <img src="img/Logo_2.png" alt="Bit By Bit logo" />
      </a>

      <nav class="responsive-nav">
        <ul>
          <li><a href="index.html">Inicio</a></li>
          <li><a href="Consolas.html">Consolas</a></li>
          <li><a href="Juegos.html">Juegos</a></li>
          <li><a href="Perifericos.html">Perif√©ricos</a></li>
          <li><a href="coleccionables.html">Coleccionables</a></li>
          <li><a href="blog.html">Blog</a></li>
          <li><a href="Acerca de.html">Acerca de</a></li>
        </ul>
      </nav>
    </div>
    <div class="container site-description">
      <p>¬øTienes dudas o sugerencias? ¬°Escr√≠benos!</p>
    </div>
  </header>

  <main class="container">
    <!-- Datos de contacto -->
    <section class="info-contacto">
      <h2>Cont√°ctanos</h2>
      <p><strong>Tel√©fono:</strong> +506 8888-0000</p>
      <p><strong>Direcci√≥n:</strong> Alajuela, Costa Rica</p>
      <p><strong>Horario de atenci√≥n:</strong> Lunes a S√°bado ‚Äì 8:00 am a 6:00 pm</p>
      <div id="map"></div>
    </section>

    <!-- Formulario de contacto -->
    <section class="formulario-contacto">
      <h2>Formulario de Contacto</h2>

      <form id="formContacto" novalidate>
        <div class="form-grid">

          <!-- Nombre -->
          <div class="form-item">
            <label for="nombre">Nombre completo:</label>
            <input type="text" id="nombre" name="nombre" required minlength="2" maxlength="60" />
            <span class="error">Por favor ingresa un nombre v√°lido.</span>
          </div>

          <!-- Correo -->
          <div class="form-item">
            <label for="correo">Correo electr√≥nico:</label>
            <input type="email" id="correo" name="correo" required />
            <span class="error">Introduce un email v√°lido.</span>
          </div>

          <!-- Fecha de nacimiento -->
          <div class="form-item">
            <label for="fechaNac">Fecha de nacimiento:</label>
            <input type="date" id="fechaNac" name="fechaNac" required />
            <span class="error">Selecciona una fecha v√°lida.</span>
          </div>

          <!-- G√©nero -->
          <div class="form-item">
            <label>G√©nero:</label>
            <div>
              <label><input type="radio" name="genero" value="Masculino" required /> Masculino</label>
              <label><input type="radio" name="genero" value="Femenino" /> Femenino</label>
              <label><input type="radio" name="genero" value="Otro" /> Otro</label>
            </div>
            <span class="error">Selecciona un g√©nero.</span>
          </div>

          <!-- Motivo -->
          <div class="form-item">
            <label for="motivo">Motivo del contacto:</label>
            <select id="motivo" name="motivo" required>
              <option value="">-- Selecciona --</option>
              <option value="consulta">Consulta general</option>
              <option value="compra">Informaci√≥n sobre compra</option>
              <option value="soporte">Soporte t√©cnico</option>
            </select>
            <span class="error">Selecciona un motivo.</span>
          </div>

          <!-- N√∫mero de pedido -->
          <div class="form-item">
            <label for="pedido">N√∫mero de pedido:</label>
            <input type="text" id="pedido" name="pedido" pattern="^\d{4,10}$" placeholder="Ej: 123456" />
            <span class="error">Debe ser un n√∫mero de 4 a 10 d√≠gitos.</span>
          </div>

          <!-- Mensaje -->
          <div class="form-item">
            <label for="mensaje">Mensaje:</label>
            <textarea id="mensaje" name="mensaje" rows="4" required></textarea>
            <span class="error">El mensaje no puede quedar vac√≠o.</span>
          </div>

          <!-- reCAPTCHA -->
          <div class="form-item">
            <div class="g-recaptcha" data-sitekey="6LcjbZkrAAAAAGQvLpb1FBlMSUfIAozGsNlMJIUU"></div>
            <span class="error" id="captchaError">Confirma que no eres un robot.</span>
          </div>

        </div>

        <div style="text-align: center; margin-top: 1rem;">
          <button class="btn-buy" type="submit">Enviar Mensaje</button>
        </div>
      </form>

      <!-- Confirmaci√≥n -->
      <div id="confirmacion" class="mensaje-confirmacion">
        <p>‚úÖ ¬°Gracias por contactarnos! Tu mensaje fue enviado correctamente.</p>
      </div>

      <!-- Resumen de datos -->
      <div id="resumenDatos">
        <h3>Resumen de datos enviados</h3>
        <ul id="resumenLista"></ul>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container footer-content">
      <a href="#"><img src="img/Instagram.png" alt="Instagram" /></a>
      <span>Bit By Bit</span>
      <a href="#"><img src="img/Facebook.png" alt="Facebook" /></a>
      <span>Bit By Bit</span>
    </div>
  </footer>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <!-- Script validaciones -->
  <script>
    // Inicializar mapa Leaflet
    const map = L.map('map').setView([10.01625, -84.21163], 13); // Coordenadas de Alajuela
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);
    L.marker([10.01625, -84.21163]).addTo(map)
      .bindPopup("üìç Bit By Bit - Alajuela, Costa Rica")
      .openPopup();

    const form = document.getElementById('formContacto');
    const resumen = document.getElementById('resumenDatos');
    const lista = document.getElementById('resumenLista');
    const confirmacion = document.getElementById('confirmacion');
    const captchaError = document.getElementById('captchaError');

    form.addEventListener('submit', function(e) {
      e.preventDefault();
      let valido = true;

      // Validaciones normales
      form.querySelectorAll('input, select, textarea').forEach(campo => {
        const error = campo.parentElement.querySelector('.error');
        if (!campo.checkValidity()) {
          valido = false;
          if (error) error.classList.add('visible');
        } else {
          if (error) error.classList.remove('visible');
        }
      });

      // Validar reCAPTCHA
      const captchaResponse = grecaptcha.getResponse();
      if (!captchaResponse) {
        captchaError.classList.add('visible');
        valido = false;
      } else {
        captchaError.classList.remove('visible');
      }

      if (!valido) return;

      // Mostrar confirmaci√≥n y resumen
      confirmacion.style.display = 'block';
      resumen.style.display = 'block';

      lista.innerHTML = `
        <li><strong>Nombre:</strong> ${form.nombre.value}</li>
        <li><strong>Correo:</strong> ${form.correo.value}</li>
        <li><strong>Fecha de nacimiento:</strong> ${form.fechaNac.value}</li>
        <li><strong>G√©nero:</strong> ${form.genero.value}</li>
        <li><strong>Motivo:</strong> ${form.motivo.value}</li>
        <li><strong>N√∫mero de pedido:</strong> ${form.pedido.value}</li>
        <li><strong>Mensaje:</strong> ${form.mensaje.value}</li>
      `;
    });
  </script>
</body>
</html>
