<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Detalle - Coleccionable</title>
  <!-- carga tu CSS global (contiene modal y cart-widget) -->
  <link rel="stylesheet" href="estilo.css">
  <style>
    /* Estilos mínimos locales que no están en estilo.css (solo layout del detalle) */
    .galeria img { width: 180px; height: auto; margin-right:0.5rem; border-radius:6px; border:2px solid var(--accent-green); }
    .detalle-grid { display:flex; gap:1.5rem; flex-wrap:wrap; align-items:flex-start; }
    .detalle-info { flex:1; min-width:240px; }
    .galeria { display:flex; gap:0.5rem; flex-wrap:wrap; margin:0.5rem 0 1rem 0; }
    .estrella { color: var(--accent-green); font-size:1.1rem; margin-right:2px;}
    .reseña { background: var(--purple-light); padding:0.75rem; border-left:4px solid var(--accent-green); border-radius:6px; margin-bottom:0.6rem; }
    /* Mantener estilos para back-link y responsividad si hace falta */
    .back-link { text-align:center; margin-top:1.25rem; }
    .back-link a { color:var(--accent-green); text-decoration:none; border-bottom:1px dashed var(--accent-green); }
    @media (max-width:720px) {
      .detalle-grid { flex-direction:column; }
      .galeria img { width: 120px; }
    }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container header-content">
      <input type="checkbox" id="menu-toggle" class="menu-toggle" />
      <label for="menu-toggle" class="menu-icon" aria-hidden="true">&#9776;</label>

      <a href="index.html" class="logo" aria-label="Ir al inicio">
        <img src="img/Logo_2.png" alt="Bit By Bit logo" />
      </a>

      <nav class="responsive-nav" aria-label="Menú principal">
        <ul>
          <li><a href="index.html">Inicio</a></li>
          <li><a href="#">Consolas</a></li>
          <li><a href="#">Juegos</a></li>
          <li><a href="#">Periféricos</a></li>
          <li><a href="coleccionables.html" class="active" aria-current="page">Coleccionables</a></li>
          <li><a href="PregFrec.html">Preguntas Frecuentes</a></li>
          <li><a href="blog.html">Blog</a></li>
          <li><a href="Acerca de.html">Acerca de</a></li>
        </ul>
      </nav>

      <!-- cart widget (usa las reglas en estilo.css) -->
      <div id="cartWidget" class="cart-widget" aria-live="polite">
        <a href="carrito.html" class="cart-widget__link" aria-label="Ver carrito de compras">
          <svg class="cart-widget__icon" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" focusable="false">
            <path fill="currentColor" d="M7 4h-2l-1 2H2v2h1l3.6 7.59-1.35 2.44A1 1 0 0 0 5.99 19H19v-2H6.42c.03 0 .06-.01.09-.03l1.1-1.98H18a1 1 0 0 0 .92-.62l3-7A1 1 0 0 0 21 6H6.21l-.94-2zM7 20a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm10 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/>
          </svg>
          <span id="cartCount" class="cart-widget__badge">0</span>
        </a>
      </div>
    </div>
  </header>

  <main class="container">
    <div id="detalleProducto"></div>
    <div class="back-link"><a href="coleccionables.html">← Volver al catálogo</a></div>
  </main>

  <footer class="site-footer">
    <div class="container footer-content">
      <a href="https://www.instagram.com" aria-label="Instagram">
        <img src="img/Instagram.png" alt="Instagram" />
      </a>
      <span>Bit By Bit</span>
      <a href="https://www.facebook.com/?locale=es_LA" aria-label="Facebook">
        <img src="img/Facebook.png" alt="Facebook" />
      </a>
      <span>Bit By Bit</span>
    </div>
  </footer>

  <!-- Lightbox (ya usado por script.js) -->
  <div id="lightbox" class="lightbox" aria-hidden="true" role="dialog" aria-label="Vista ampliada de imagen">
    <button class="lb-close" aria-label="Cerrar" id="lbClose">Cerrar</button>
    <img src="" alt="Imagen ampliada" class="lb-img" id="lbImg">
  </div>

  <!-- Modal confirmación agregado al carrito (usa estilos de estilo.css) -->
  <div id="addCartModal" class="modal-confirm" aria-hidden="true" role="dialog" aria-label="Producto agregado al carrito">
    <div class="modal-confirm__backdrop" tabindex="-1"></div>

    <div class="modal-confirm__card" role="document" aria-modal="true">
      <button id="modalClose" class="modal-confirm__close" aria-label="Cerrar modal">✕</button>

      <div class="modal-confirm__content">
        <img id="modalProdImg" class="modal-confirm__img" src="img/placeholder.png" alt="Imagen del producto" />
        <div class="modal-confirm__info">
          <h3 id="modalProdName">Nombre del producto</h3>
          <p id="modalProdMsg" class="modal-confirm__msg">Se añadió al carrito correctamente.</p>
          <div class="modal-confirm__actions">
            <a href="carrito.html" class="btn-Comprar" role="link">Ir al carrito</a>
            <button id="modalContinue" class="btn-VM" type="button">Seguir comprando</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Tu script central (catálogo, detalle, carrito, modal) -->
  <script src="script.js"></script>

  <!-- Script ligero local para cierre/abrir seguro del modal (comportamiento complementario) -->
  <script>
    (function () {
      // Se asegura de que el modal pueda cerrarse desde esta página aunque script.js no tenga handlers
      function qs(sel){return document.querySelector(sel);}
      const modal = qs('#addCartModal');
      if (!modal) return;
      const backdrop = modal.querySelector('.modal-confirm__backdrop');
      const closeBtn = qs('#modalClose');
      const continueBtn = qs('#modalContinue');

      function closeModal(){
        modal.classList.remove('open');
        modal.setAttribute('aria-hidden','true');
      }
      function openModal(){
        modal.classList.add('open');
        modal.setAttribute('aria-hidden','false');
      }

      // Vincular botones si existen
      if (closeBtn) closeBtn.addEventListener('click', closeModal);
      if (continueBtn) continueBtn.addEventListener('click', closeModal);
      if (backdrop) backdrop.addEventListener('click', (e) => {
        if (e.target === backdrop) closeModal();
      });

      // Si script.js controla la apertura (por ejemplo addToCartById), el modal ya será visible.
      // Aquí solo añadimos escape key handler local:
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && modal.classList.contains('open')) closeModal();
      });

      // Exponer funciones para debugging / uso desde la consola (opcional)
      window.__detalleModal = { open: openModal, close: closeModal };
    })();
  </script>
</body>
</html>
